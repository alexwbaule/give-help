CREATE TABLE IF NOT EXISTS USERS (
  UserID CHAR(26) PRIMARY KEY NOT NULL,
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Name VARCHAR(512) NOT NULL,
  Description TEXT DEFAULT NULL,
  DeviceID VARCHAR(64) DEFAULT NULL,
  AllowShareData BOOLEAN DEFAULT FALSE,
  Tags TEXT [] DEFAULT NULL,
  Images TEXT [] DEFAULT NULL,
  --Reputation
  Giver REAL DEFAULT 0,
  Taker REAL DEFAULT 0,
  --Contatct
  URL VARCHAR(512) NOT NULL,
  Email VARCHAR(512) DEFAULT NULL,
  Facebook VARCHAR(512) DEFAULT NULL,
  Instagram VARCHAR(512) DEFAULT NULL,
  Google VARCHAR(512) DEFAULT NULL,
  AdditionalData TEXT DEFAULT NULL,
  --Contact Address
  Address TEXT DEFAULT NULL,
  City VARCHAR(64) DEFAULT NULL,
  State VARCHAR(64) DEFAULT NULL,
  ZipCode INTEGER DEFAULT NULL,
  Country VARCHAR(64) DEFAULT NULL,
  Lat NUMERIC(12, 4) DEFAULT NULL,
  Long NUMERIC(12, 4) DEFAULT NULL,
  RegisterFrom TEXT DEFAULT NULL
);
CREATE SEQUENCE IF NOT EXISTS SEQ_PHONE_ID START 1;
CREATE TABLE IF NOT EXISTS PHONES (
  PhoneID INTEGER DEFAULT NEXTVAL('SEQ_PHONE_ID'),
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UserID CHAR(26) REFERENCES USERS(UserID),
  CountryCode VARCHAR(4) DEFAULT '+55',
  IsDefault BOOLEAN DEFAULT NULL,
  PhoneNumber VARCHAR(13) NOT NULL,
  Region CHAR(2) DEFAULT NULL,
  WhatsApp BOOLEAN DEFAULT NULL,
  PRIMARY KEY (PhoneID, UserID)
);
CREATE TABLE IF NOT EXISTS CATEGORIES (
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Name TEXT PRIMARY KEY NOT NULL
);
CREATE TABLE IF NOT EXISTS PROPOSALS (
  ProposalID CHAR(26) PRIMARY KEY NOT NULL,
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UserID CHAR(26) REFERENCES USERS(UserID),
  --Side: offer|request|local-business
  Side VARCHAR(64) NOT NULL,
  --ProposalType: job|service|product|finance
  ProposalType VARCHAR(64) NOT NULL,
  --Tags: categories
  Tags TEXT [] DEFAULT NULL,
  Title TEXT NOT NULL,
  Description TEXT NOT NULL,
  ProposalValidate TIMESTAMP DEFAULT NULL,
  Lat NUMERIC(12, 4) DEFAULT NULL,
  Long NUMERIC(12, 4) DEFAULT NULL,
  Range REAL DEFAULT NULL,
  AreaTags TEXT [] DEFAULT NULL,
  IsActive BOOLEAN DEFAULT TRUE,
  Title TEXT NOT NULL,
  Images TEXT [] DEFAULT NULL,
  ExposeUserData BOOLEAN DEFAULT FALSE,
  DataToShare TEXT [] DEFAULT NULL,
  EstimatedValue Money DEFAULT 0
);
CREATE TABLE IF NOT EXISTS TRANSACTIONS (
  TransactionID CHAR(26) PRIMARY KEY NOT NULL,
  ProposalID CHAR(26) REFERENCES PROPOSALS(ProposalID),
  GiverID CHAR(26) REFERENCES USERS(UserID),
  TakerID CHAR(26) REFERENCES USERS(UserID),
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  GiverRating REAL DEFAULT 0,
  GiverReviewComment TEXT DEFAULT NULL,
  TakerRating REAL DEFAULT 0,
  TakerReviewComment TEXT DEFAULT NULL,
  Status VARCHAR(32) NOT NULL
);
--NEW
CREATE SEQUENCE IF NOT EXISTS SEQ_TERMS_ID START 1;
CREATE TABLE IF NOT EXISTS TERMS (
  TermID INTEGER DEFAULT NEXTVAL('SEQ_TERMS_ID'),
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Title TEXT NOT NULL,
  Description TEXT NOT NULL,
  IsActive BOOLEAN DEFAULT TRUE
);
CREATE TABLE IF NOT EXISTS TERMS_ACCEPTEDS (
  UserID CHAR(26) PRIMARY KEY REFERENCES USERS(UserID),
  TermID CHAR(26) PRIMARY KEY REFERENCES TERMS(TermID),
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Accepted BOOLEAN DEFAULT TRUE
);
CREATE SEQUENCE IF NOT EXISTS SEQ_COMPLAINTS_ID START 1;
CREATE TABLE IF NOT EXISTS COMPLAINTS (
  ComplaintID INTEGER DEFAULT NEXTVAL('SEQ_COMPLAINTS_ID'),
  ComplainerID CHAR(26) PRIMARY KEY REFERENCES USERS(UserID),
  AccusedID CHAR(26) REFERENCES USERS(UserID),
  CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  LastUpdate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  Comment TEXT DEFAULT NOT NULL,
  Accepted BOOLEAN DEFAULT TRUE
);